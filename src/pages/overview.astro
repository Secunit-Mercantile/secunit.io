---
import { getLocalizedRoute } from "@/js/translationUtils";

// main layout
import BaseLayout from "@/layouts/BaseLayout.astro";

// components
import Button from "@/components/button/Button.astro";

// utils
import { getLocaleFromUrl } from "@/js/localeUtils";

const currLocale = getLocaleFromUrl(Astro.url);
---

<BaseLayout title="Theme Overview" description="The various pages, sections, and widgets of Zenith">
  <div class="relative -mt-23 min-h-[100lvh] overflow-clip">
    <div class="site-container relative mr-auto max-w-6xl pt-36">
      <h1 class="h1">Overview</h1>
      <p class="text-muted-foreground mt-2">The various pages of Zenith</p>
      <div class="xs:grid-cols-2 mx-auto mt-10 grid gap-x-8 gap-y-4 md:grid-cols-3">
        <!-- Landing Pages -->
        <div class="flex flex-col">
          <h3 class="overview-heading">Landing Pages</h3>
          <a class="overview-link" href={getLocalizedRoute(currLocale, "/")}>Landing 1</a>
          <a class="overview-link" href={getLocalizedRoute(currLocale, "/examples/landing2")}
            >Landing 2</a
          >
          <a class="overview-link" href={getLocalizedRoute(currLocale, "/examples/landing3")}
            >Landing 3</a
          >
        </div>

        <!-- Blog pages -->
        <div class="flex flex-col">
          <h3 class="overview-heading">Blog</h3>
          <a
            class="overview-link"
            href={getLocalizedRoute(currLocale, "/blog/tsconfig-paths-setup")}>Post Layout 1</a
          >
          <a class="overview-link" href={getLocalizedRoute(currLocale, "/examples/blog-post-2")}
            >Post Layout 2</a
          >
          <a class="overview-link" href={getLocalizedRoute(currLocale, "/blog")}>Blog Index</a>
          <a class="overview-link" href={getLocalizedRoute(currLocale, "/categories/development")}
            >Category Page</a
          >
          <a class="overview-link" href={getLocalizedRoute(currLocale, "/categories")}
            >Categories Index</a
          >
        </div>

        <!-- Sections -->
        <div class="flex flex-col">
          <h3 class="overview-heading">Sections</h3>
          <a class="overview-link" href={getLocalizedRoute(currLocale, "examples/pricing-faq")}
            >Pricing and FAQ Sections</a
          >
          <a class="overview-link" href={getLocalizedRoute(currLocale, "/examples/hero-sections")}
            >Hero Sections</a
          >
          <a
            class="overview-link"
            href={getLocalizedRoute(currLocale, "/examples/testimonial-logo-sections")}
            >Testimonial and Logo Cloud Sections</a
          >
        </div>

        <!-- Careers pages -->
        <div class="flex flex-col">
          <h3 class="overview-heading">Careers</h3>
          <a class="overview-link" href={getLocalizedRoute(currLocale, "/careers/ux-designer")}
            >Career Layout</a
          >
          <a class="overview-link" href={getLocalizedRoute(currLocale, "/careers")}>Careers Index</a
          >
        </div>

        <!-- Widgets -->
        <div class="flex flex-col">
          <h3 class="overview-heading">Widgets and Forms</h3>
          <!-- CookieConsent component should be used in BaseLayout.astro if desired -->
          <button id="test-consent-demo-btn" class="overview-link text-left">Cookie Consent</button>
          <a class="overview-link" href={getLocalizedRoute(currLocale, "/contact")}>Contact</a>
          <a class="overview-link" href={getLocalizedRoute(currLocale, "/sign-in")}>Login</a>
          <a class="overview-link" href={getLocalizedRoute(currLocale, "/sign-up")}>Sign Up</a>
        </div>

        <!-- Other -->
        <div class="flex flex-col">
          <h3 class="overview-heading">Other Pages</h3>
          <a class="overview-link" href={getLocalizedRoute(currLocale, "/elements")}
            >MDX Page Elements</a
          >
          <a class="overview-link" href={getLocalizedRoute(currLocale, "/privacy-policy")}>Legal</a>
          <a class="overview-link" href="/not-a-link/">404</a>
          <a
            class="overview-link"
            href={getLocalizedRoute(currLocale, "/rss.xml")}
            target="_blank"
            rel="noopener noreferrer">RSS Feed</a
          >
        </div>
      </div>
    </div>

    <!-- CookieConsent component should be used in BaseLayout.astro if desired -->
    <div id="test-banner" class="fixed inset-x-6 bottom-6 z-50 hidden justify-center">
      <div
        class="bg-background flex flex-wrap items-center justify-center gap-x-6 gap-y-4 rounded-xl border p-4"
      >
        <div class="text-center">
          <p class="text-sm lg:text-base">
            We use cookies to improve your experience on this site. To learn more, see our <a
              href={getLocalizedRoute(currLocale, "/privacy-policy")}
              class="hover:text-primary text-foreground decoration-primary underline transition"
              >Privacy Policy</a
            >.
          </p>
        </div>
        <div class="mx-auto flex gap-2">
          <Button variant="primary" class="min-w-0 px-6 py-2">Accept</Button>
          <Button variant="ghost" class="min-w-0 px-6 py-2">Decline</Button>
        </div>
      </div>
    </div>
  </div>
</BaseLayout>

<style>
  @import "@/styles/tailwind-theme.css";

  .overview-heading {
    @apply mt-6 mb-2 text-lg font-medium;
  }
  .overview-link {
    @apply text-body hover:text-dark my-[.2rem] py-0.5 leading-snug transition dark:text-darkmode-body dark:hover:text-white;
  }
</style>

<script>
  //Script purely for demo of the CookieConsent component. Use the actual <CookieConsent /> component in BaseLayout.astro if desired.
  function cookieConsentSetup() {
    const cookieBanner = document.getElementById("test-banner");
    const acceptButton = document.querySelector("#test-banner button:first-of-type");
    const declineButton = document.querySelector("#test-banner button:last-of-type");
    const cookieConsentDemoBtn = document.getElementById("test-consent-demo-btn");

    cookieConsentDemoBtn?.addEventListener("click", () => {
      cookieBanner?.classList.toggle("hidden");
      cookieBanner?.classList.toggle("flex");
    });

    // If the user clicks the accept button, hide the banner and set a cookie
    acceptButton?.addEventListener("click", () => {
      console.log("cookies accepted example");
      cookieBanner?.classList.toggle("hidden");
      cookieBanner?.classList.toggle("flex");
    });

    // If the user clicks the decline button, hide the banner and set a cookie
    declineButton?.addEventListener("click", () => {
      console.log("cookies declined example");
      cookieBanner?.classList.toggle("hidden");
      cookieBanner?.classList.toggle("flex");
    });
  }

  // runs on initial page load
  cookieConsentSetup();

  // runs on view transitions navigation
  document.addEventListener("astro:after-swap", cookieConsentSetup);
</script>

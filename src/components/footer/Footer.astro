---
import { Icon } from "astro-icon/components";
import { type ComponentProps } from "astro/types";

// components
import FooterLink from "@/components/footer/FooterLink.astro";
import SiteLogo from "@/components/site-logo/SiteLogo.astro";
import SocialIconSimple from "@/components/social/SocialIconSimple.astro";

// utils
import { getLocaleFromUrl } from "@/js/localeUtils";
import { getTranslatedData } from "@/js/translationUtils";

// data
const currLocale = getLocaleFromUrl(Astro.url);
const siteData = getTranslatedData("siteData", currLocale);

const today = new Date();

interface FooterLinkItem {
  label: string;
  href: string;
  newTab?: boolean;
}

const servicesLinks: FooterLinkItem[] = [
  { label: "AI Enablement", href: "/services#ai-enablement", newTab: false },
  { label: "Web Development", href: "/services#web-development", newTab: false },
  { label: "DevOps & SRE", href: "/services#devops-sre", newTab: false },
  { label: "Virtual CISO", href: "/services#virtual-ciso", newTab: false },
  { label: "FinOps", href: "/services#finops", newTab: false },
];

const companyLinks: FooterLinkItem[] = [
  { label: "About", href: "/about", newTab: false },
  { label: "Contact", href: "/contact", newTab: false },
  { label: "Privacy Policy", href: "/privacy-policy", newTab: false },
  { label: "Terms of Service", href: "/terms", newTab: false },
];

const contactInfo = {
  email: "hello@secunit.io",
  location: "Charlotte, NC",
  tagline: "Remote-first â€” we work with clients nationwide",
};

const socialLinks: ComponentProps<typeof SocialIconSimple>[] = [
  {
    name: "LinkedIn",
    url: "https://linkedin.com/company/secunit",
    icon: "tabler/brand-linkedin",
  },
  {
    name: "GitHub",
    url: "https://github.com/x86txt",
    icon: "tabler/brand-github",
  },
];
---

<div class="bg-background text-foreground dark relative py-12 md:py-20">
  <footer class="site-container relative m-auto w-full pb-6">
    <div class="flex w-full flex-col justify-between gap-x-4 gap-y-10 md:flex-row md:gap-10">
      <div class="flex max-w-md flex-col items-start">
        <SiteLogo />
        <p class="mt-6 text-muted-foreground">
          Enterprise-grade security, DevOps, and AI consulting for growing businesses.
        </p>
        <!-- Social Links -->
        <div class="mt-8 flex flex-wrap gap-4">
          {socialLinks.map((social) => <SocialIconSimple {...social} />)}
        </div>
      </div>
      <div class="flex flex-col gap-x-24 gap-y-10 sm:flex-row md:mt-4">
        <!-- Services -->
        <div class="flex flex-col gap-1">
          <h3 class="mb-4 font-medium">Services</h3>
          {
            servicesLinks.map((link) => (
              <FooterLink href={link.href} newTab={link.newTab}>
                {link.label}
              </FooterLink>
            ))
          }
        </div>

        <!-- Company -->
        <div class="flex flex-col gap-1">
          <h3 class="mb-4 font-medium">Company</h3>
          {
            companyLinks.map((link) => (
              <FooterLink href={link.href} newTab={link.newTab}>
                {link.label}
              </FooterLink>
            ))
          }
        </div>

        <!-- Contact -->
        <div class="flex flex-col gap-1">
          <h3 class="mb-4 font-medium">Contact</h3>
          <a href={`mailto:${contactInfo.email}`} class="text-muted-foreground hover:text-foreground transition-colors">
            {contactInfo.email}
          </a>
          <p class="text-muted-foreground">{contactInfo.location}</p>
          <p class="text-sm text-muted-foreground/70">{contactInfo.tagline}</p>
        </div>
      </div>
    </div>

    <!-- Bottom Bar -->
    <div class="pt-16">
      <div class="flex flex-col items-center justify-between gap-4 border-t border-border pt-8 md:flex-row">
        <p class="text-muted-foreground text-sm">
          &copy; {today.getFullYear()} {siteData.name} LLC. All rights reserved.
        </p>
      </div>
    </div>
  </footer>
</div>
